{"remainingRequest":"D:\\project\\seat\\node_modules\\babel-loader\\lib\\index.js!D:\\project\\seat\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\project\\seat\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\seat\\src\\components\\com\\kuang.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\seat\\src\\components\\com\\kuang.vue","mtime":1624009101818},{"path":"D:\\project\\seat\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\seat\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\project\\seat\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\seat\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"Hello\",\n  props: {\n    txtlist: {\n      type: Object,\n      default: function _default() {\n        return {\n          x1: 370,\n          y1: 10,\n          x2: 980,\n          y2: 490\n        };\n      }\n    },\n    persons: Array,\n    options: Object\n  },\n  data: function data() {\n    return {\n      xinxi: [],\n      items: [],\n      seat: [],\n      sort: [],\n      sum: 0\n    };\n  },\n  created: function created() {\n    var app = this;\n    this.$axios.getDistributeData().then(function (res) {\n      app.xinxi = res.data.data.confSeats;\n    }).catch(function (res) {\n      console.log(res.data);\n    });\n  },\n  mounted: function mounted() {\n    var rector = $(\"#selectionRect\"); //拖选起点\n\n    var startX = 0;\n    var startY = 0; //选择框核心代码\n\n    function resizeToPoint(x, y) {\n      var width = Math.abs(x - startX);\n      var height = Math.abs(y - startY);\n      rector.width(width);\n      rector.height(height); //当鼠标x方向上为向左拖动 设置left位置\n\n      if (x < startX) {\n        rector.css({\n          left: startX - width + \"px\"\n        });\n      } //当鼠标y方向上为向上拖动 设置top位置\n\n\n      if (y < startY) {\n        rector.css({\n          top: startY - height + \"px\"\n        });\n      }\n    }\n    /**\r\n     *核心相交算法\r\n     * @param rect1{x1,y1,x2,y2}\r\n     * @param rect2 {x1,y1,x2,y2}\r\n     */\n\n    /**\r\n     *获取元素的矩形的起始点坐标与其对角点坐标\r\n     * @param $el\r\n     * @return {x1,y1,x2,y2}\r\n     */\n    //框选处理 如果元素与选择框相交则设置样式\n\n  },\n  watch: {\n    options: {\n      handler: function handler(newVal, oldVal) {\n        this.seatSort(); // console.log(11111,newVal,oldVal)\n        // console.log(this.options)\n      },\n      deep: true\n    },\n    persons: {\n      handler: function handler(newVal, oldVal) {\n        this.sortPerson();\n      },\n      deep: true\n    },\n    txtlist: {\n      handler: function handler(newVal, oldVal) {\n        this.handleRectSelection(this.txtlist);\n      },\n      deep: true\n    }\n  },\n  methods: {\n    seatSort: function seatSort() {\n      var oT1 = document.querySelectorAll(\".t1\");\n\n      for (var i = 0; i < oT1.length; i++) {\n        for (var j = 0; j < this.seat.length; j++) {\n          if (i == this.seat[j]) {\n            var a = \"\";\n            var r,\n                w = 0;\n            r = Math.ceil((i + 1) / 30);\n            w = parseInt((i + 1) % 30);\n            a = r + \"-\" + w;\n            oT1[i].innerText = this.options[a]; // oT1[i].className += \"choose\";\n\n            this.GLOBAL.baseURL[j][\"orderMark\"] = parseInt(this.options[a]);\n          }\n        }\n      }\n\n      this.seat = [];\n    },\n    handleRectSelection: function handleRectSelection(data) {\n      var a = \"\";\n      var app = this;\n      $(\".t1\").each(function (index) {\n        var rect = app.getRect($(this));\n        app.xinxi[index][\"blockId\"] = 1;\n\n        if (app.isCross(data, rect)) {\n          app.seat.push(index);\n          app.items.push(app.xinxi[index]);\n          $(this).addClass(\"selected\");\n        } else {\n          $(this).text('');\n          $(this).removeClass(\"selected\");\n        }\n      });\n      this.GLOBAL.baseURL = app.items;\n      console.log(app.items);\n      app.items = [];\n    },\n    getRect: function getRect($el) {\n      var x1 = $el.offset().left;\n      var y1 = $el.offset().top;\n      var x2 = x1 + $el.outerWidth();\n      var y2 = y1 + $el.outerHeight();\n      return {\n        x1: x1,\n        x2: x2,\n        y1: y1,\n        y2: y2\n      };\n    },\n    isCross: function isCross(rect1, rect2) {\n      var xNotCross = true; //x方向上不重合\n\n      var yNotCross = true; //y方向上不重合\n\n      xNotCross = rect1.x1 > rect2.x2 || rect2.x1 > rect1.x2;\n      yNotCross = rect1.y1 > rect2.y2 || rect2.y1 > rect1.y2;\n      return !(xNotCross || yNotCross);\n    },\n    sortPerson: function sortPerson() {\n      var oT1 = document.querySelectorAll(\".t1\");\n\n      for (var i = 0; i < oT1.length; i++) {\n        for (var j = 0; j < this.seat.length; j++) {\n          if (i == this.seat[j]) {\n            console.log(this.persons[j]['userUnit'].des);\n            oT1[i].innerText = this.persons[j]['userUnit'].des;\n          }\n        }\n      }\n    }\n  }\n};",{"version":3,"sources":["kuang.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div id=\"kz\" style=\"display: flex\">\r\n        <div v-for=\"index of 5\" class=\"main\" :key=\"index.id\">\r\n            <div class=\"table\"></div>\r\n            <div style=\"display: flex\">\r\n                <div class=\"t1\" v-for=\"index of 6\" :key=\"index.id\"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \"Hello\",\r\n    props: {\r\n        txtlist:{\r\n            type:Object,\r\n            default:function () {\r\n            return {\r\n                x1: 370,\r\n                y1: 10,\r\n                x2: 980,\r\n                y2: 490,\r\n            }\r\n            }\r\n        },\r\n        persons:Array,\r\n        options:Object,\r\n\r\n    },\r\n    data() {\r\n        return {\r\n            xinxi: [],\r\n            items: [],\r\n            seat: [],\r\n            sort: [],\r\n            sum: 0,\r\n        };\r\n    },\r\n    created() {\r\n        const app = this;\r\n        this.$axios\r\n            .getDistributeData()\r\n            .then((res) => {\r\n                app.xinxi = res.data.data.confSeats;\r\n            })\r\n            .catch(function(res) {\r\n                console.log(res.data);\r\n            });\r\n    },\r\n    mounted: function() {\r\n        var rector = $(\"#selectionRect\");\r\n\r\n        //拖选起点\r\n        var startX = 0;\r\n        var startY = 0;\r\n        //选择框核心代码\r\n\r\n        function resizeToPoint(x, y) {\r\n            var width = Math.abs(x - startX);\r\n            var height = Math.abs(y - startY);\r\n            rector.width(width);\r\n            rector.height(height);\r\n            //当鼠标x方向上为向左拖动 设置left位置\r\n            if (x < startX) {\r\n                rector.css({\r\n                    left: startX - width + \"px\",\r\n                });\r\n            }\r\n            //当鼠标y方向上为向上拖动 设置top位置\r\n            if (y < startY) {\r\n                rector.css({\r\n                    top: startY - height + \"px\",\r\n                });\r\n            }\r\n        }\r\n\r\n        /**\r\n         *核心相交算法\r\n         * @param rect1{x1,y1,x2,y2}\r\n         * @param rect2 {x1,y1,x2,y2}\r\n         */\r\n        \r\n        /**\r\n         *获取元素的矩形的起始点坐标与其对角点坐标\r\n         * @param $el\r\n         * @return {x1,y1,x2,y2}\r\n         */\r\n        \r\n        \r\n        //框选处理 如果元素与选择框相交则设置样式\r\n        \r\n\r\n        \r\n        \r\n    },\r\n    watch: {\r\n        options: {\r\n            handler: function(newVal, oldVal) {\r\n                this.seatSort();\r\n                // console.log(11111,newVal,oldVal)\r\n                // console.log(this.options)\r\n            },\r\n            deep: true,\r\n        },\r\n        persons: {\r\n            handler: function(newVal, oldVal) {\r\n                \r\n                this.sortPerson();\r\n            },\r\n            deep: true,\r\n        },\r\n        txtlist:{\r\n            handler:function(newVal,oldVal){\r\n                this.handleRectSelection(this.txtlist)\r\n            },\r\n            deep:true,\r\n        }\r\n    },\r\n    methods: {\r\n        seatSort() {\r\n            var oT1 = document.querySelectorAll(\".t1\");\r\n            for (var i = 0; i < oT1.length; i++) {\r\n                for (var j = 0; j < this.seat.length; j++) {\r\n                    if (i == this.seat[j]) {\r\n                        var a = \"\";\r\n                        var r,w = 0;\r\n                        r = Math.ceil((i + 1) / 30);\r\n                        w = parseInt((i + 1) % 30);\r\n                        a = r + \"-\" + w;\r\n                        oT1[i].innerText = this.options[a];\r\n                        // oT1[i].className += \"choose\";\r\n                        this.GLOBAL.baseURL[j][\"orderMark\"] = parseInt(this.options[a]);\r\n                    }\r\n                }\r\n            }\r\n            this.seat=[]\r\n        },\r\n        handleRectSelection(data) {\r\n            var a = \"\";\r\n            const app = this;\r\n            $(\".t1\").each(function(index) {\r\n                var rect = app.getRect($(this));\r\n                app.xinxi[index][\"blockId\"] = 1;\r\n                if (app.isCross(data, rect)) {\r\n                    app.seat.push(index);\r\n                    app.items.push(app.xinxi[index]);\r\n                    $(this).addClass(\"selected\");\r\n                } else {\r\n                    $(this).text('')\r\n                    $(this).removeClass(\"selected\");\r\n                }\r\n            });\r\n            this.GLOBAL.baseURL = app.items;\r\n            console.log(app.items)\r\n            app.items=[]\r\n        },\r\n        getRect($el) {\r\n            var x1 = $el.offset().left;\r\n            var y1 = $el.offset().top;\r\n            var x2 = x1 + $el.outerWidth();\r\n            var y2 = y1 + $el.outerHeight();\r\n            return { x1, x2, y1, y2 };\r\n        },\r\n        isCross(rect1, rect2) {\r\n            var xNotCross = true; //x方向上不重合\r\n            var yNotCross = true; //y方向上不重合\r\n            xNotCross = rect1.x1 > rect2.x2 || rect2.x1 > rect1.x2;\r\n            yNotCross = rect1.y1 > rect2.y2 || rect2.y1 > rect1.y2;\r\n            return !(xNotCross || yNotCross);\r\n        },\r\n        sortPerson(){\r\n            var oT1=document.querySelectorAll(\".t1\");\r\n\t\t\tfor(var i = 0;i<oT1.length;i++){\r\n\t\t\t\t\r\n\t\t\t\tfor (var j=0;j<this.seat.length;j++){\r\n\t\t\t\t\tif(i == this.seat[j]){\r\n                        \r\n                        console.log(this.persons[j]['userUnit'].des)\r\n\t\t\t\t\t\toT1[i].innerText=this.persons[j]['userUnit'].des\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.t1 {\r\n    width: 40px;\r\n    height: 20px;\r\n    margin: 5px;\r\n    background-color: rgb(135, 145, 153);\r\n    text-align: center;\r\n    color: #fff;\r\n}\r\n.selected {\r\n    width: 40px;\r\n    height: 20px;\r\n    margin: 5px;\r\n    text-align: center;\r\n    color: #fff;\r\n    background-color: red;\r\n}\r\n.selects {\r\n    width: 40px;\r\n    height: 20px;\r\n    margin: 5px;\r\n    text-align: center;\r\n    color: #fff;\r\n    background-color: #ff0;\r\n}\r\n.choose {\r\n    background-color: #000088;\r\n}\r\n.table {\r\n    width: 300px;\r\n    height: 30px;\r\n    background-color: rgb(191, 205, 214);\r\n}\r\n.main {\r\n    margin-left: 30px;\r\n    margin-bottom: 20px;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/com"}]}