{"remainingRequest":"D:\\project\\seat\\node_modules\\babel-loader\\lib\\index.js!D:\\project\\seat\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\project\\seat\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\seat\\src\\components\\com\\kuang.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\seat\\src\\components\\com\\kuang.vue","mtime":1624173500577},{"path":"D:\\project\\seat\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\seat\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\project\\seat\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\seat\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"Hello\",\n  props: {\n    txtlist: {\n      type: Object,\n      default: function _default() {\n        return {\n          x1: 430,\n          y1: 420,\n          x2: 1440,\n          y2: 860\n        };\n      }\n    },\n    persons: Array,\n    options: Object,\n    pName: String,\n    flag: Number\n  },\n  data: function data() {\n    return {\n      xinxi: [],\n      items: [],\n      seat: [],\n      sort: [],\n      planList: [],\n      sum: 0,\n      lastSeat: [],\n      temp1: null,\n      temp2: \"\",\n      isshows: true\n    };\n  },\n  created: function created() {\n    var app = this;\n    this.$axios.getDistributeData().then(function (res) {\n      app.xinxi = res.data.data.confSeats;\n    }).catch(function (res) {\n      console.log(res.data);\n    });\n  },\n  mounted: function mounted() {\n    var rector = $(\"#selectionRect\"); //拖选起点\n\n    var startX = 0;\n    var startY = 0; //选择框核心代码\n\n    function resizeToPoint(x, y) {\n      var width = Math.abs(x - startX);\n      var height = Math.abs(y - startY);\n      rector.width(width);\n      rector.height(height); //当鼠标x方向上为向左拖动 设置left位置\n\n      if (x < startX) {\n        rector.css({\n          left: startX - width + \"px\"\n        });\n      } //当鼠标y方向上为向上拖动 设置top位置\n\n\n      if (y < startY) {\n        rector.css({\n          top: startY - height + \"px\"\n        });\n      }\n    }\n    /**\r\n     *核心相交算法\r\n     * @param rect1{x1,y1,x2,y2}\r\n     * @param rect2 {x1,y1,x2,y2}\r\n     */\n\n    /**\r\n     *获取元素的矩形的起始点坐标与其对角点坐标\r\n     * @param $el\r\n     * @return {x1,y1,x2,y2}\r\n     */\n    //框选处理 如果元素与选择框相交则设置样式\n\n  },\n  watch: {\n    options: {\n      handler: function handler(newVal, oldVal) {\n        this.seatSort(); // console.log(11111,newVal,oldVal)\n        // console.log(this.options)\n      },\n      deep: true\n    },\n    persons: {\n      handler: function handler(newVal, oldVal) {\n        this.sortPerson();\n      },\n      deep: true\n    },\n    txtlist: {\n      handler: function handler(newVal, oldVal) {\n        this.handleRectSelection(this.txtlist);\n      },\n      deep: true\n    }\n  },\n  methods: {\n    mousemove: function mousemove() {\n      var _this = this;\n\n      this.$axios.getNoPeople().then(function (res) {\n        _this.planList = res.data.data;\n      });\n      this.$emit(\"getList\", this.planList);\n    },\n    handlePeople: function handlePeople(e) {\n      this.$emit(\"changeType\", this.isshows, this.closeName);\n\n      if (!this.pName) {\n        console.log();\n      } else {\n        e.currentTarget.innerText = this.pName;\n        e.currentTarget.className = e.currentTarget.className + \" choose\";\n      }\n    },\n    seatSort: function seatSort() {\n      var oT1 = document.querySelectorAll(\".t1\");\n\n      for (var i = 0; i < oT1.length; i++) {\n        for (var j = 0; j < this.lastSeat.length; j++) {\n          if (i == this.lastSeat[j]) {\n            var a = \"\";\n            var r,\n                w = 0;\n            r = Math.ceil((i + 1) / 30);\n            w = parseInt((i + 1) % 30);\n            a = r + \"-\" + w;\n\n            if (this.options[a] != null) {\n              oT1[i].innerText = this.options[a];\n            } else {\n              oT1[i].innerText = \"占位\";\n            }\n\n            this.GLOBAL.baseURL[j][\"orderMark\"] = parseInt(this.options[a]);\n          }\n        }\n      }\n    },\n    handleRectSelection: function handleRectSelection(data) {\n      var a = \"\";\n      var app = this;\n      $(\".t1\").each(function (index) {\n        var rect = app.getRect($(this));\n\n        if (app.isCross(data, rect)) {\n          var b = 0;\n          app.xinxi[index][\"blockId\"] = 1;\n          b = $(this).text();\n\n          if (b != \"占位\") {\n            app.xinxi[index].merge = 0;\n            $(this).addClass(\"selected\");\n          } else {\n            $(this).addClass(\"zhanyong\");\n            app.xinxi[index].merge = 2;\n          }\n\n          app.seat.push(index);\n          app.items.push(app.xinxi[index]);\n        } else {\n          $(this).text(\"\");\n          $(this).removeClass(\"selected\");\n        }\n      });\n      this.GLOBAL.baseURL = app.items;\n      app.sum = app.items.length;\n      app.$emit(\"showSum\", app.sum);\n      app.lastSeat = app.seat;\n      app.seat = [];\n      app.items = [];\n    },\n    getRect: function getRect($el) {\n      var x1 = $el.offset().left;\n      var y1 = $el.offset().top;\n      var x2 = x1 + $el.outerWidth();\n      var y2 = y1 + $el.outerHeight();\n      return {\n        x1: x1,\n        x2: x2,\n        y1: y1,\n        y2: y2\n      };\n    },\n    isCross: function isCross(rect1, rect2) {\n      var xNotCross = true; //x方向上不重合\n\n      var yNotCross = true; //y方向上不重合\n\n      xNotCross = rect1.x1 > rect2.x2 || rect2.x1 > rect1.x2;\n      yNotCross = rect1.y1 > rect2.y2 || rect2.y1 > rect1.y2;\n      return !(xNotCross || yNotCross);\n    },\n    sortPerson: function sortPerson() {\n      var oT1 = document.querySelectorAll(\".t1\");\n\n      for (var i = 0; i < oT1.length; i++) {\n        for (var j = 0; j < this.lastSeat.length; j++) {\n          if (i == this.lastSeat[j]) {\n            if (this.persons[j].merge == 0) {\n              if (this.persons[j][\"userUnit\"] != null) {\n                oT1[i].className = oT1[i].className + \" choose\";\n                oT1[i].innerText = this.persons[j][\"userUnit\"].des;\n              }\n            } else {\n              oT1[i].innerText = \"占位\";\n            }\n          }\n        }\n      }\n    },\n    // 进入时\n    // handleDragEnter(e) {\n    //   console.log('拖拽进入')\n    //   console.log(e.currentTarget);\n    //   e.currentTarget.innerText = ''\n    // },\n    handleDrag: function handleDrag(event) {\n      this.temp1 = event.currentTarget;\n      this.temp2 = event.currentTarget.innerText; //   this.temp1 = event.currentTarget.innerText;\n    },\n    handleDrop: function handleDrop(e) {\n      e.preventDefault();\n\n      if (!e.currentTarget.innerText) {\n        e.currentTarget.innerText = \"占位\";\n        e.currentTarget.className = \"zhanyong\";\n      } else {\n        this.temp1.innerText = e.currentTarget.innerText;\n        e.currentTarget.innerText = this.temp2;\n      }\n    },\n    handleDragOver: function handleDragOver(e) {\n      e.preventDefault();\n    },\n    // 拖拽结束\n    // handleDragEnd(){\n    //     console.log('拖拽结束');\n    // }\n    clear: function clear(e) {\n      e.currentTarget.innerText = '';\n      e.currentTarget.className = 't1';\n    }\n  }\n};",{"version":3,"sources":["kuang.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div id=\"kz\" style=\"display: flex\">\r\n    <div v-for=\"index of 5\" class=\"main\" :key=\"index.id\" :gindex=\"index\">\r\n      <div style=\"display: flex\">\r\n        <div\r\n          class=\"t1\"\r\n          v-for=\"index of 6\"\r\n          :key=\"index.id\"\r\n          draggable=\"true\"\r\n            @contextmenu.prevent=\"mousemove()\"\r\n\r\n          @click=\"handlePeople($event)\"\r\n          @dragstart=\"handleDrag($event)\"\r\n          @drop=\"handleDrop($event)\"\r\n          @dragover=\"handleDragOver($event)\"\r\n          v-on:dblclick=\"clear($event)\"\r\n        ></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Hello\",\r\n  props: {\r\n    txtlist: {\r\n      type: Object,\r\n      default: function() {\r\n        return {\r\n          x1: 430,\r\n          y1: 420,\r\n          x2: 1440,\r\n          y2: 860\r\n        };\r\n      }\r\n    },\r\n    persons: Array,\r\n    options: Object,\r\n    pName: String,\r\n    flag:Number\r\n  },\r\n  data() {\r\n    return {\r\n      xinxi: [],\r\n      items: [],\r\n      seat: [],\r\n      sort: [],\r\n      planList: [],\r\n      sum: 0,\r\n      lastSeat: [],\r\n      temp1: null,\r\n      temp2: \"\",\r\n      isshows: true,\r\n    };\r\n  },\r\n  created() {\r\n    const app = this;\r\n\r\n    this.$axios\r\n      .getDistributeData()\r\n      .then(res => {\r\n        app.xinxi = res.data.data.confSeats;\r\n      })\r\n      .catch(function(res) {\r\n        console.log(res.data);\r\n      });\r\n  },\r\n  mounted: function() {\r\n    var rector = $(\"#selectionRect\");\r\n\r\n    //拖选起点\r\n    var startX = 0;\r\n    var startY = 0;\r\n    //选择框核心代码\r\n\r\n    function resizeToPoint(x, y) {\r\n      var width = Math.abs(x - startX);\r\n      var height = Math.abs(y - startY);\r\n      rector.width(width);\r\n      rector.height(height);\r\n      //当鼠标x方向上为向左拖动 设置left位置\r\n      if (x < startX) {\r\n        rector.css({\r\n          left: startX - width + \"px\"\r\n        });\r\n      }\r\n      //当鼠标y方向上为向上拖动 设置top位置\r\n      if (y < startY) {\r\n        rector.css({\r\n          top: startY - height + \"px\"\r\n        });\r\n      }\r\n    }\r\n\r\n    /**\r\n     *核心相交算法\r\n     * @param rect1{x1,y1,x2,y2}\r\n     * @param rect2 {x1,y1,x2,y2}\r\n     */\r\n\r\n    /**\r\n     *获取元素的矩形的起始点坐标与其对角点坐标\r\n     * @param $el\r\n     * @return {x1,y1,x2,y2}\r\n     */\r\n\r\n    //框选处理 如果元素与选择框相交则设置样式\r\n  },\r\n  watch: {\r\n    options: {\r\n      handler: function(newVal, oldVal) {\r\n        this.seatSort();\r\n        // console.log(11111,newVal,oldVal)\r\n        // console.log(this.options)\r\n      },\r\n      deep: true\r\n    },\r\n    persons: {\r\n      handler: function(newVal, oldVal) {\r\n        this.sortPerson();\r\n      },\r\n      deep: true\r\n    },\r\n    txtlist: {\r\n      handler: function(newVal, oldVal) {\r\n        this.handleRectSelection(this.txtlist);\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  methods: {\r\n      mousemove() {\r\n            this.$axios.getNoPeople().then((res) => {\r\n                this.planList = res.data.data;\r\n            });\r\n            this.$emit(\"getList\", this.planList);\r\n        },\r\n     handlePeople(e) {\r\n       \r\n         this.$emit(\"changeType\", this.isshows, this.closeName);\r\n       \r\n            if (!this.pName) {\r\n              console.log();\r\n              \r\n            } else {\r\n                e.currentTarget.innerText = this.pName;\r\n                e.currentTarget.className =e.currentTarget.className + \" choose\"\r\n            }\r\n            \r\n            \r\n        },\r\n    seatSort() {\r\n      var oT1 = document.querySelectorAll(\".t1\");\r\n      for (var i = 0; i < oT1.length; i++) {\r\n        for (var j = 0; j < this.lastSeat.length; j++) {\r\n          if (i == this.lastSeat[j]) {\r\n            var a = \"\";\r\n            var r,\r\n              w = 0;\r\n            r = Math.ceil((i + 1) / 30);\r\n            w = parseInt((i + 1) % 30);\r\n            a = r + \"-\" + w;\r\n            if (this.options[a] != null) {\r\n              oT1[i].innerText = this.options[a];\r\n            } else {\r\n              oT1[i].innerText = \"占位\";\r\n            }\r\n            this.GLOBAL.baseURL[j][\"orderMark\"] = parseInt(this.options[a]);\r\n          }\r\n        }\r\n      }\r\n    },\r\n    handleRectSelection(data) {\r\n      var a = \"\";\r\n      const app = this;\r\n\r\n      $(\".t1\").each(function(index) {\r\n        var rect = app.getRect($(this));\r\n        if (app.isCross(data, rect)) {\r\n          var b = 0;\r\n          app.xinxi[index][\"blockId\"] = 1;\r\n          b = $(this).text();\r\n          if (b != \"占位\") {\r\n            app.xinxi[index].merge = 0;\r\n            $(this).addClass(\"selected\");\r\n          } else {\r\n            $(this).addClass(\"zhanyong\");\r\n            app.xinxi[index].merge = 2;\r\n          }\r\n          app.seat.push(index);\r\n          app.items.push(app.xinxi[index]);\r\n        } else {\r\n          $(this).text(\"\");\r\n          $(this).removeClass(\"selected\");\r\n        }\r\n      });\r\n      this.GLOBAL.baseURL = app.items;\r\n      app.sum = app.items.length;\r\n      app.$emit(\"showSum\", app.sum);\r\n      app.lastSeat = app.seat;\r\n      app.seat = [];\r\n      app.items = [];\r\n    },\r\n    getRect($el) {\r\n      var x1 = $el.offset().left;\r\n      var y1 = $el.offset().top;\r\n      var x2 = x1 + $el.outerWidth();\r\n      var y2 = y1 + $el.outerHeight();\r\n      return { x1, x2, y1, y2 };\r\n    },\r\n    isCross(rect1, rect2) {\r\n      var xNotCross = true; //x方向上不重合\r\n      var yNotCross = true; //y方向上不重合\r\n      xNotCross = rect1.x1 > rect2.x2 || rect2.x1 > rect1.x2;\r\n      yNotCross = rect1.y1 > rect2.y2 || rect2.y1 > rect1.y2;\r\n      return !(xNotCross || yNotCross);\r\n    },\r\n    sortPerson() {\r\n      var oT1 = document.querySelectorAll(\".t1\");\r\n      for (var i = 0; i < oT1.length; i++) {\r\n        for (var j = 0; j < this.lastSeat.length; j++) {\r\n          if (i == this.lastSeat[j]) {\r\n            if (this.persons[j].merge == 0) {\r\n              if(this.persons[j][\"userUnit\"] != null){\r\n                oT1[i].className = oT1[i].className + \" choose\";\r\n                oT1[i].innerText = this.persons[j][\"userUnit\"].des;\r\n              }\r\n              \r\n            } else {\r\n              oT1[i].innerText = \"占位\";\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    // 进入时\r\n    // handleDragEnter(e) {\r\n    //   console.log('拖拽进入')\r\n    //   console.log(e.currentTarget);\r\n    //   e.currentTarget.innerText = ''\r\n    // },\r\n    handleDrag(event) {\r\n      this.temp1 = event.currentTarget;\r\n      this.temp2 = event.currentTarget.innerText;\r\n      //   this.temp1 = event.currentTarget.innerText;\r\n    },\r\n    handleDrop(e) {\r\n      e.preventDefault();\r\n      if (!e.currentTarget.innerText) {\r\n        e.currentTarget.innerText = \"占位\";\r\n        e.currentTarget.className = \"zhanyong\";\r\n        \r\n      } else {\r\n        this.temp1.innerText = e.currentTarget.innerText;\r\n        e.currentTarget.innerText = this.temp2;\r\n      }\r\n    },\r\n    handleDragOver(e) {\r\n      e.preventDefault();\r\n    },\r\n  \r\n    // 拖拽结束\r\n    // handleDragEnd(){\r\n    //     console.log('拖拽结束');\r\n    // }\r\n        clear(e) {\r\n      e.currentTarget.innerText = ''\r\n      e.currentTarget.className = 't1'\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.dialog {\r\n  width: 100px;\r\n  height: 100px;\r\n  position: absolute;\r\n}\r\n.t1 {\r\n  width: 40px;\r\n  height: 37px;\r\n  margin: 3px;\r\n  font-size: 10px;\r\n  line-height: 30px;\r\n  background-image: url(\"../../assets/默认空位.png\");\r\n  background-repeat: no-repeat;\r\n  background-size: 100% 100%;\r\n  text-align: center;\r\n  color: #fff;\r\n  border-radius: 25%;\r\n  box-shadow: 5px 5px 10px #000;\r\n}\r\n.selected {\r\n  width: 40px;\r\n  height: 37px;\r\n  margin: 3px;\r\n  font-size: 10px;\r\n  line-height: 30px;\r\n  text-align: center;\r\n  color: #fff;\r\n  background-image: url(\"../../assets/框选中.png\");\r\n  background-size: 100% 100%;\r\n  background-repeat: no-repeat;\r\n}\r\n\r\n.choose {\r\n  width: 40px;\r\n  height: 37px;\r\n  margin: 2px;\r\n  line-height: 30px;\r\n  text-align: center;\r\n  color: #fff;\r\n  background-image: url(\"../../assets/已经有人.png\");\r\n  background-size: 100% 100%;\r\n  background-repeat: no-repeat;\r\n  overflow: hidden;\r\n}\r\n.zhanyong {\r\n  width: 40px;\r\n  height: 37px;\r\n  margin: 2px;\r\n  line-height: 30px;\r\n  text-align: center;\r\n  color: #fff;\r\n  background-image: url(\"../../assets/已经占用但没有人.png\");\r\n  background-size: 100% 100%;\r\n  background-repeat: no-repeat;\r\n}\r\n.main {\r\n  width: 20%;\r\n  margin: 0 auto;\r\n  margin-bottom: 10px;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/com"}]}